{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Synthesia Video Converter","text":"<p>Converts Synthesia video to MIDI, note sheets PDF and Music XML. Works with YouTube video links. Should work with any piano roll software, but tested on Synthesia. </p>"},{"location":"#todos","title":"TODOs","text":"<ol> <li>Remove irrelevant parts of a video: autodetect intro and outro.</li> <li>Make it work with flashy starts when keys are immediately near the real play line: autodetect actual play line.</li> <li>Make it work with background images below keys: remove static parts of the frame.</li> <li>Make it work with a lot of sparkles: improve thresholding.</li> </ol> <p>Enchantments</p> <ol> <li>Add pausing video during debugging.</li> <li>Add switching between visual modes during debugging (original frame, gray scale, threshold, thick line etc).</li> </ol>"},{"location":"algorithm/","title":"Algorithm","text":""},{"location":"algorithm/#i-preprocessing","title":"I. Preprocessing","text":""},{"location":"algorithm/#1-input","title":"1. Input","text":"<p>On the input comes either a video with Synthesia (or any other piano roll) recording (directly imported into the script) or YouTube video link (video downloaded and processed as video input).</p>"},{"location":"algorithm/#2-clearing","title":"2. Clearing","text":"<p>Defining where intro, outro and other not related to the piano play parts of the video are and cutting them off (basically defining where actual play parts are).</p> <p>Done by recognizing the piano keyboard: if keyboard in on the screen then likely that this part is a play part.</p>"},{"location":"algorithm/#ii-processing","title":"II. Processing","text":""},{"location":"algorithm/#1-determining-the-pitch","title":"1. Determining the pitch","text":"<p>The audio is being processed to determine the pitch in which first left pressed key is played.  </p> <p>It is required as ofter in the video it is shown only a part of the keyboard and it's not clear what the first visible octave is without the audio.  </p>"},{"location":"algorithm/#2-defining-keys-played","title":"2. Defining keys played","text":"<p>Each frame of the video is being processed via methods of Computer Vision to extract information about what keys to play, when, with what power and with which hand if possible to determine.  </p>"},{"location":"algorithm/#a-thresholding-the-frame","title":"a. Thresholding the frame","text":"<p>First of all contrast of the frame is increased, then the frame is converted into a grey scale, then Gaussian blur is applied, then threshold (Otsu's Binarization) and finally advanced morphological transformation of opening.  </p> <p>This step is crucial for final precision.</p>"},{"location":"algorithm/#b-cutting-the-frame","title":"b. Cutting the frame","text":"<p>Frame is cut to a height of a 1 pixel and only this thin line is being used for future analysis.</p>"},{"location":"algorithm/#c-defining-the-virtual-keyboard","title":"c. Defining the virtual keyboard","text":"<p>Determining keys size and paddings between them.  </p> <p>Determined by falling keys approximate shape rectangle size. The whole song should be analyzed to detect a correct size.</p>"},{"location":"algorithm/#d-marking-falling-keys-with-actual-musical-notes","title":"d. Marking falling keys with actual musical notes","text":"<p>Using bottom part of the frame as a play line to determine keys played at the moment. Each keys is marked with a pitch. The power with which keys should be pressed (a volume value) is determined via audio analysis.</p>"},{"location":"algorithm/#f-separating-keys-by-hand-played-with","title":"f. Separating keys by hand played with","text":"<p>Colors of keys in the video (if they are present) are used to determine different hands. It is possible to use player hands to determine what hands to use to press keys, but that's a hard challenge to deal with.</p>"},{"location":"algorithm/#e-combining-close-falling-keys-into-one","title":"e. Combining close falling keys into one","text":"<p>Same musical note pressed without a pause marks as a single note with specific duration.</p>"},{"location":"algorithm/#iii-postprocessing","title":"III. Postprocessing","text":""},{"location":"algorithm/#1-saving-gathered-information","title":"1. Saving gathered information","text":"<p>The gathered information is being combined and saved in the MusicXML format (https://www.musicxml.com/).</p>"},{"location":"algorithm/#2-output","title":"2. Output","text":"<p>Using library music21 the MusicXML file is being converter into MIDI file and sheet music PDF that are the the output of the program.</p>"},{"location":"comparison-of-existing-solutions/","title":"Comparison of Existing Solutions","text":"<p>There are a lot of working solutions, but most of them work poorly so here is only a small subset of good ones.</p>"},{"location":"comparison-of-existing-solutions/#1-video2midi","title":"1. video2midi","text":"<p>The best solution I've found. Works using Computer Vision analyze.</p> <p>Has comfortable visual user interface to tweak things.</p> <p>YouTube: Creating MIDI from hybrid Synthesia Video. </p>"},{"location":"comparison-of-existing-solutions/#2-sheetesia","title":"2. sheetesia","text":""},{"location":"comparison-of-existing-solutions/#3-syn2midi","title":"3. syn2midi","text":""},{"location":"comparison-of-existing-solutions/#4-midi-converter","title":"4. MIDI-Converter","text":""},{"location":"comparison-of-existing-solutions/#5-pdf-omr-pmerge","title":"5. pdf-omr-pmerge","text":""},{"location":"comparison-of-existing-solutions/#7-synthesiavideo2midi","title":"7. synthesiavideo2midi","text":""},{"location":"comparison-of-existing-solutions/#8-desynthesia","title":"8. DeSynthesia","text":""},{"location":"comparison-of-existing-solutions/#9-pianoroll_to_midi","title":"9. pianoroll_to_midi","text":""},{"location":"comparison-of-existing-solutions/#10-johndoesstuff-getting-midi-from-synthesia-videos","title":"10. JohnDoesStuff - Getting MIDI from Synthesia videos","text":"<p>No stars as it's even not in a separate repository, but it is actually not a bad project and it's better than a lot of projects above.</p> <p>YouTube: Getting MIDI from Synthesia videos. </p>"},{"location":"project-structure/","title":"Project Structure","text":"<p>TODO</p> <pre><code>mkdocs.yml    # Docs configuration file.\ndocs/         # The documentation sources.\n</code></pre>"}]}